<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>

<meta charset="utf-8">
<title>Concurrency in Go &#8211; Code Musings</title>
<meta name="description" content="">
<meta name="keywords" content="Golang">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Concurrency in Go">
<meta property="og:description" content="">
<meta property="og:url" content="/2014/08/22/concurrency-with-go">
<meta property="og:site_name" content="Code Musings">





<link rel="canonical" href="/2014/08/22/concurrency-with-go">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Code Musings Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=NTR" rel="stylesheet">
<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<link rel="stylesheet" href="/assets/css/pygments.css">
<link rel="stylesheet" href="/assets/css/monokai.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="">Code Musings</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				<li><a href="/about/" >About</a></li>
		        
				<li><a href="/posts/" >Posts</a></li>
		        
				<li><a href="/origami/" >Origami</a></li>
		        
				<li><a href="/fractals/" >Fractals</a></li>
		        
				<li><a href="/tags/" >Tags</a></li>
		        
				<li><a href="/papers/" >Papers</a></li>
		        
				<li><a href="/diversions/" >Diversions</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
	<img src="/images/bio-photo.png" class="bio-photo" alt="NagaChaitanya Vellanki bio photo"></a>

<h3>NagaChaitanya Vellanki</h3>
<p></p>



<a href="http://linkedin.com/in/nagachaitanya" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>


<a href="http://github.com/chaitanyav" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>






  </div>
  <article>
    <div class="headline-wrap">
      
        <h1><a href="/2014/08/22/concurrency-with-go" rel="bookmark" title="Concurrency in Go">Concurrency in Go</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>Concurrency in Go can be achieved by using <a href="https://golang.org/doc/effective_go.html#goroutines">goroutines</a>, A goroutine is basically a function which executes concurrently with other goroutines/functions. Here is a basic <a href="http://play.golang.org/p/I84oNjrh96">example</a></p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"time"</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">foo</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Hello from a goroutine"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">go</span><span class="x"> </span><span class="n">foo</span><span class="p">()</span><span class="x">

  </span><span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="m">1</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Good Bye!!!"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span></code></pre></div>

<p>A goroutine can be invoked like this “go funcName()”. As goroutines execute concurrently with other functions we have used a time.Sleep with 1 second duration so that the goroutine can run. Let’s say if we did not have the time.Sleep in the main function, the program exits printing the “Good Bye!!!” string. Same <a href="http://play.golang.org/p/PA50RJI1en">example</a> without the time.Sleep</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">foo</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Hello from a goroutine"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">go</span><span class="x"> </span><span class="n">foo</span><span class="p">()</span><span class="x">

  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Good Bye!!!"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span></code></pre></div>

<p>Ah, you might be wondering what good are goroutines when i cannot pass information between goroutines, functions. This is where channels come into picture. A channel is pipe through which messages can be sent/received. More about channels <a href="http://tour.golang.org/#66">here</a>. Let’s go through a example illustrating the usage of goroutines, channels.</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="c">/* August 22, 2014
 * Author: NagaChaitanya Vellanki
 */</span><span class="x">
</span><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
	</span><span class="s">"fmt"</span><span class="x">
	</span><span class="s">"github.com/iand/feedparser"</span><span class="x">
	</span><span class="s">"io/ioutil"</span><span class="x">
	</span><span class="s">"net/http"</span><span class="x">
	</span><span class="s">"strings"</span><span class="x">
	</span><span class="s">"time"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">parseFeed</span><span class="p">(</span><span class="n">feedURL</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">completed</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="kt">bool</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">feedURL</span><span class="p">)</span><span class="x">
	</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
	</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">responseBytes</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">error</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">reader</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">responseBytes</span><span class="p">))</span><span class="x">
			</span><span class="n">feed</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">feedparser</span><span class="o">.</span><span class="n">NewFeed</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="x">
			</span><span class="n">starString</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">Repeat</span><span class="p">(</span><span class="s">"*"</span><span class="p">,</span><span class="x"> </span><span class="m">80</span><span class="p">)</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">starString</span><span class="p">)</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">feed</span><span class="o">.</span><span class="n">Title</span><span class="p">)</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">feed</span><span class="o">.</span><span class="n">Link</span><span class="p">)</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Num Posts/Items: "</span><span class="p">,</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">feed</span><span class="o">.</span><span class="n">Items</span><span class="p">))</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">starString</span><span class="p">)</span><span class="x">

			</span><span class="c">// uncomment the lines below to the individual posts/items</span><span class="x">
			</span><span class="c">/*
			     for _, item := range feed.Items {
			     fmt.Println("Title: ", item.Title)
			     fmt.Println("Description: ", item.Description)
			   }
			*/</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">
	</span><span class="n">completed</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="no">true</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">categoryByFeedURL</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="x">
		</span><span class="s">"http://cdnjs.com/rss.xml"</span><span class="o">:</span><span class="x">                                                   </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"https://blog.twitter.com/api/blog.rss?name=engineering&amp;alt=rss"</span><span class="o">:</span><span class="x">             </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://rubyrogues.com/feed/"</span><span class="o">:</span><span class="x">                                                </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"https://tech.dropbox.com/feed/"</span><span class="o">:</span><span class="x">                                             </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://news.ycombinator.com/rss"</span><span class="o">:</span><span class="x">                                            </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/HighScalability"</span><span class="o">:</span><span class="x">                                </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/html5rocks"</span><span class="o">:</span><span class="x">                                     </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/TechCrunch/"</span><span class="o">:</span><span class="x">                                    </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://venturebeat.com/feed/"</span><span class="o">:</span><span class="x">                                               </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"https://github.com/blog.atom"</span><span class="o">:</span><span class="x">                                               </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://weblog.rubyonrails.org/feed/atom.xml"</span><span class="o">:</span><span class="x">                                </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://podcasts.thoughtbot.com/giantrobots.xml"</span><span class="o">:</span><span class="x">                             </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/railscasts"</span><span class="o">:</span><span class="x">                                     </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/nvidia/parallelforall?format=xml"</span><span class="o">:</span><span class="x">               </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/codinghorror"</span><span class="o">:</span><span class="x">                                   </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://rss.slashdot.org/Slashdot/slashdot"</span><span class="o">:</span><span class="x">                                  </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.kickstarter.com/projects/feed.atom"</span><span class="o">:</span><span class="x">                              </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.mashable.com/Mashable"</span><span class="o">:</span><span class="x">                                         </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.gawker.com/gizmodo/full"</span><span class="o">:</span><span class="x">                                       </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/ommalik"</span><span class="o">:</span><span class="x">                                        </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/OfficialAndroidBlog"</span><span class="o">:</span><span class="x">                            </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://vimcasts.org/feeds/ogg"</span><span class="o">:</span><span class="x">                                              </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.engadget.com/rss.xml"</span><span class="o">:</span><span class="x">                                            </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://blogs.computerworld.com/rss.xml"</span><span class="o">:</span><span class="x">                                     </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/cnet/NnTv"</span><span class="o">:</span><span class="x">                                      </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.wired.com/wired/index"</span><span class="o">:</span><span class="x">                                         </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.anandtech.com/rss/"</span><span class="o">:</span><span class="x">                                              </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://appleinsider.com.feedsportal.com/c/33975/f/616168/index.rss"</span><span class="o">:</span><span class="x">         </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.arstechnica.com/arstechnica/index?format=xml"</span><span class="o">:</span><span class="x">                  </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.pcworld.com/index.rss"</span><span class="o">:</span><span class="x">                                           </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.searchengineland.com/searchengineland?format=xml"</span><span class="o">:</span><span class="x">              </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/UnwiredView"</span><span class="o">:</span><span class="x">                                    </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.theregister.co.uk/headlines.atom"</span><span class="o">:</span><span class="x">                                </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.technologyreview.com/topnews.rss"</span><span class="o">:</span><span class="x">                                </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/tedtalks_video"</span><span class="o">:</span><span class="x">                                 </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/avc"</span><span class="o">:</span><span class="x">                                            </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feed.onstartups.com/onstartups"</span><span class="o">:</span><span class="x">                                      </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/IeeeSpectrumPodcasts"</span><span class="o">:</span><span class="x">                           </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/IeeeSpectrumVideo"</span><span class="o">:</span><span class="x">                              </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/IeeeSpectrumFullText"</span><span class="o">:</span><span class="x">                           </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/GoogleOpenSourceBlog"</span><span class="o">:</span><span class="x">                           </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/37signals/beMH"</span><span class="o">:</span><span class="x">                                 </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.joelonsoftware.com/rss.xml"</span><span class="o">:</span><span class="x">                                      </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://martinfowler.com/feed.atom"</span><span class="o">:</span><span class="x">                                          </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.hanselman.com/scotthanselman"</span><span class="o">:</span><span class="x">                                  </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.randsinrepose.com/index.xml"</span><span class="o">:</span><span class="x">                                     </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://bokardo.com/feed/"</span><span class="o">:</span><span class="x">                                                   </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://blog.stackoverflow.com/feed/"</span><span class="o">:</span><span class="x">                                        </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/thoughtworks-blogs"</span><span class="o">:</span><span class="x">                             </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.artima.com/weblogs/feeds/weblogs.rss"</span><span class="o">:</span><span class="x">                            </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/blogspot/RLXA"</span><span class="o">:</span><span class="x">                                  </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/blogspot/SbSV"</span><span class="o">:</span><span class="x">                                  </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/InsideSearch"</span><span class="o">:</span><span class="x">                                   </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/GDBcode"</span><span class="o">:</span><span class="x">                                        </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds2.feedburner.com/blogspot/Egta"</span><span class="o">:</span><span class="x">                                 </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/GoogleOnlineSecurityBlog"</span><span class="o">:</span><span class="x">                       </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/GoogleStudentBlog"</span><span class="o">:</span><span class="x">                              </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/GoogleTranslateBlog"</span><span class="o">:</span><span class="x">                            </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://techblog.netflix.com/feeds/posts/default"</span><span class="o">:</span><span class="x">                            </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://tech-book-store.amazon.com/blog/feed/recentPosts.rss"</span><span class="o">:</span><span class="x">                </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/Ruby5?format=xml"</span><span class="o">:</span><span class="x">                               </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/PetrMitrichev?format=xml"</span><span class="o">:</span><span class="x">                       </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://xkcd.com/rss.xml"</span><span class="o">:</span><span class="x">                                                    </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.perfplanet.com/rss.xml"</span><span class="o">:</span><span class="x">                                          </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feed.dilbert.com/dilbert/daily_strip?format=xml"</span><span class="o">:</span><span class="x">                     </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.stanford.edu/group/edcorner/uploads/podcast/EducatorsCorner.xml"</span><span class="o">:</span><span class="x"> </span><span class="s">"developer"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.zdnet.com/blog/rss.xml"</span><span class="o">:</span><span class="x">                                          </span><span class="s">"tech"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.reuters.com/reuters/topNews"</span><span class="o">:</span><span class="x">                                   </span><span class="s">"news"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://rss.cnn.com/rss/cnn_topstories.rss"</span><span class="o">:</span><span class="x">                                  </span><span class="s">"news"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.abcnews.com/abcnews/topstories"</span><span class="o">:</span><span class="x">                                </span><span class="s">"news"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.npr.org/rss/rss.php?id=1001"</span><span class="o">:</span><span class="x">                                     </span><span class="s">"news"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.harvardbusiness.org/harvardbusiness?format=xml"</span><span class="o">:</span><span class="x">                </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.thestreet.com/tsc/feeds/rss/latest-stories"</span><span class="o">:</span><span class="x">                    </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.forbes.com/real-time/feed2/"</span><span class="o">:</span><span class="x">                                     </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/freakonomics"</span><span class="o">:</span><span class="x">                                   </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://podcast.cnbc.com/mmpodcast/lightninground.xml"</span><span class="o">:</span><span class="x">                       </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://www.economist.com/feeds/print-sections/77/business.xml"</span><span class="o">:</span><span class="x">              </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/freakonomicsradio?format=xml"</span><span class="o">:</span><span class="x">                   </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.feedburner.com/fastcompany/headlines"</span><span class="o">:</span><span class="x">                          </span><span class="s">"business"</span><span class="p">,</span><span class="x">
		</span><span class="s">"http://feeds.fool.com/usmf/foolwatch"</span><span class="o">:</span><span class="x">                                       </span><span class="s">"business"</span><span class="p">,</span><span class="x">
	</span><span class="p">}</span><span class="x">
	</span><span class="n">numFeedURLs</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">categoryByFeedURL</span><span class="p">)</span><span class="x">
	</span><span class="n">completed</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="kt">bool</span><span class="p">,</span><span class="x"> </span><span class="n">numFeedURLs</span><span class="p">)</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">feedURL</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">categoryByFeedURL</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">go</span><span class="x"> </span><span class="n">parseFeed</span><span class="p">(</span><span class="n">feedURL</span><span class="p">,</span><span class="x"> </span><span class="n">completed</span><span class="p">)</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">categoryByFeedURL</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">select</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">case</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">completed</span><span class="o">:</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Finished Parsing a feed at: "</span><span class="p">,</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">())</span><span class="x">
		</span><span class="k">case</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">time</span><span class="o">.</span><span class="n">After</span><span class="p">(</span><span class="m">1</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Minute</span><span class="p">)</span><span class="o">:</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Time out!!, lets move on"</span><span class="p">)</span><span class="x">
			</span><span class="n">completed</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="no">false</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Finished fetching all feeds"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span></code></pre></div>

<h4 id="sample-output">Sample output</h4>

<div class="highlight"><pre><code class="language-console" data-lang="console">.....
..... (truncated some output)
.....
.....
********************************************************************************
Google Translate Blog
http://pubsubhubbub.appspot.com/
Num Posts/Items:  25
********************************************************************************
Finished Parsing a feed at:  2014-08-22 18:05:35.654612959 -0700 PDT
********************************************************************************
The Netflix Tech Blog
http://www.blogger.com/feeds/725338818844296080/posts/default?start-index=26&amp;max-results=25
Num Posts/Items:  25
********************************************************************************
Finished Parsing a feed at:  2014-08-22 18:05:36.722009376 -0700 PDT
********************************************************************************
VentureBeat
http://venturebeat.com
Num Posts/Items:  30
********************************************************************************
Finished Parsing a feed at:  2014-08-22 18:05:40.091771787 -0700 PDT
********************************************************************************
ABC News: Top Stories
http://abcnews.go.com/
Num Posts/Items:  33
********************************************************************************
Finished Parsing a feed at:  2014-08-22 18:05:40.235177514 -0700 PDT
********************************************************************************
Economist.com
http://www.economist.com
Num Posts/Items:  20
********************************************************************************
Finished Parsing a feed at:  2014-08-22 18:05:40.349098971 -0700 PDT
********************************************************************************
Ruby Rogues
http://rubyrogues.com
Num Posts/Items:  20
********************************************************************************
Finished Parsing a feed at:  2014-08-22 18:05:50.188633751 -0700 PDT
Get http://www.joelonsoftware.com/rss.xml: dial tcp: i/o timeout
Get http://www.engadget.com/rss.xml: dial tcp: i/o timeout
Get http://feeds.reuters.com/reuters/topNews: dial tcp: i/o timeout
Get http://feeds.mashable.com/Mashable: dial tcp: i/o timeout
Get http://feed.dilbert.com/dilbert/daily_strip?format=xml: dial tcp: i/o timeout
Get http://www.zdnet.com/blog/rss.xml: dial tcp: i/o timeout
Get http://www.npr.org/rss/rss.php?id=1001: dial tcp: i/o timeout
Get http://bokardo.com/feed/: dial tcp: i/o timeout
Get http://www.stanford.edu/group/edcorner/uploads/podcast/EducatorsCorner.xml: dial tcp: i/o timeout
Get https://tech.dropbox.com/feed/: dial tcp: i/o timeout
Get http://rss.slashdot.org/Slashdot/slashdot: dial tcp: i/o timeout
Get http://feeds.hanselman.com/scotthanselman: dial tcp: i/o timeout
Finished Parsing a feed at:  2014-08-22 18:05:56.276427935 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276443162 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276448534 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.27645314 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276458319 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.27646313 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276468479 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276473478 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276478238 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276482996 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276488006 -0700 PDT
Finished Parsing a feed at:  2014-08-22 18:05:56.276493035 -0700 PDT
Time out!!, lets move on
Finished Parsing a feed at:  2014-08-22 18:06:56.277632245 -0700 PDT
Finished fetching all feeds
./test_feed  0.72s user 0.27s system 1% cpu 1:30.02 total</code></pre></div>

<p>The above program concurrently fetches the posts from the RSS feeds. We have a map with key as the feedURL, the value is the category the feed belongs to.
<br /></p>

<p>We create a boolean channel(buffered channel) with a capacity equal to the number of feed urls. We use this channel to coordinate between the main function and the goroutine. To fetch the feeds concurrently we launch as many goroutines as the number of feed urls. The reference of channel is also passed as a argument to goroutine.  After launching the goroutines we wait to receive messages from the channel (channels are blocking if there is no message to receive), A message is received (<strong>&lt;-completed</strong>) from the channel when a goroutine sends (<strong>completed &lt;- true</strong>) a message  on the channel, which can happen after either successfully parsing a feed url or due to a error while fetching the feed url. Sometimes it takes a while to fetch a particular feed, in this case we can send a message to a channel after a timeout so that we can deterministically move forward without waiting forever on the channel. This can be achieved by using the <strong>time.After()</strong> function with the select(which is like a switch statement for channels), the <strong>time.After()</strong> function sends out the time to the after the timeout is reached. Once we receive messages from all the goroutines the program prints “Finished fetching all feeds” and exits.
<br /></p>

<p>I am really excited to write code in Go.<strong> Happy hacking Gophers!!!</strong>.</p>

<h4 id="installing-a-go-package">Installing a go package</h4>
<p>Set the GOPATH environment variable and install the package using the ‘go get’</p>

<div class="highlight"><pre><code class="language-console" data-lang="console">export GOPATH=~/Documents/projects/go
go get github.com/iand/feedparser</code></pre></div>

<p>The package will be installed to $GOPATH/pkg directory.</p>

<h4 id="go-resources">Go Resources</h4>
<ul>
  <li><a href="https://gobyexample.com/">gobyexample.com</a></li>
  <li><a href="http://play.golang.org/">play.golang.org</a> web console to try out small go programs</li>
  <li><a href="https://golang.org/doc/effective_go.html">Effective Go</a></li>
  <li><a href="https://vimeo.com/49718712">‘Concurrency is NOT Parallelism’ - Rob Pike</a></li>
  <li><a href="https://www.youtube.com/watch?v=f6kdp27TYZs">Go concurrency patterns</a></li>
  <li><a href="https://www.youtube.com/watch?v=QDDwwePbDtw">Advanced Go concurrency patterns</a></li>
  <li><a href="https://talks.golang.org/2013/bestpractices.slide#1">Go Best Practices</a></li>
</ul>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          
	<img src="/images/bio-photo.png" class="bio-photo" alt="NagaChaitanya Vellanki bio photo"></a>

<h3>NagaChaitanya Vellanki</h3>
<p></p>



<a href="http://linkedin.com/in/nagachaitanya" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>


<a href="http://github.com/chaitanyav" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>






        </div>
        <p class="byline"><strong>Concurrency in Go</strong> was published on <time datetime="2014-08-22T00:00:00+00:00">August 22, 2014</time> by <a href="/about" title="About NagaChaitanya Vellanki">NagaChaitanya Vellanki</a>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/2017/07/24/google-test-part1" title="Google Test - Part 1">Google Test - Part 1</a></li>
    
      <li><a href="/2017/07/23/google-test" title="Google Test & Google Mock Installation">Google Test & Google Mock Installation</a></li>
    
      <li><a href="/2016/01/23/functions-and-their-graphs" title="Functions and their graphs">Functions and their graphs</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2017 NagaChaitanya Vellanki. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript"
    src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'codemusings'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


	        

</body>
</html>